(()=>{"use strict";var e=function(e,o,n,t){return new(n||(n=Promise))((function(s,c){function r(e){try{d(t.next(e))}catch(e){c(e)}}function i(e){try{d(t.throw(e))}catch(e){c(e)}}function d(e){var o;e.done?s(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,i)}d((t=t.apply(e,o||[])).next())}))};chrome.tabs.onCreated.addListener((o=>{chrome.storage.sync.get(["isEnabled"],(o=>{o.isEnabled&&chrome.tabs.onUpdated.addListener(((o,n,t)=>e(void 0,void 0,void 0,(function*(){const{User:e}=yield chrome.storage.sync.get("User"),o=yield fetch("http://localhost:3001/professor/getPolicies?"+new URLSearchParams({name:e.profId}),{method:"GET"}),{policies:n}=yield o.json();var s;n.includes((s=t.url,`${new URL(s).origin}/**/*`))||"chrome://newtab/"===t.url||chrome.tabs.remove(t.id)}))))}))})),chrome.windows.onFocusChanged.addListener((o=>{chrome.storage.sync.get(["isEnabled"],(n=>e(void 0,void 0,void 0,(function*(){if(n.isEnabled&&(console.log(chrome.windows),console.log(o),console.log(chrome.windows.WINDOW_ID_CURRENT),o!==chrome.windows.WINDOW_ID_CURRENT)){const{User:e}=yield chrome.storage.sync.get("User");console.log(e),e&&fetch("http://localhost:3001/professor/focus",{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}})}}))))}))})();